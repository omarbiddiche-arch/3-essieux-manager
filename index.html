<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3 Essieux Manager</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="presences-new.css">
    <!-- Flatpickr for modern date pickers -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/fr.js"></script>
</head>

<body>
    <!-- Auth Container -->
    <div id="auth-container"
        style="display: flex; align-items: center; justify-content: center; min-height: 100vh; background: var(--bg-secondary);">
        <div class="card" style="max-width: 400px; width: 90%;">
            <h2 style="text-align: center; margin-bottom: 2rem;">ðŸš› 3 Essieux Manager</h2>
            <!-- Login Form -->
            <form id="loginForm" onsubmit="login(event)">
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" name="email" required class="form-control" placeholder="votre@email.com">
                </div>
                <div class="form-group">
                    <label>Mot de passe</label>
                    <input type="password" name="password" required class="form-control">
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">Connexion</button>
                <div style="text-align: center; margin-top: 1rem;">
                    <a href="#" onclick="toggleAuth('register')" style="font-size: 0.9rem;">Creer un compte</a>
                    <br>
                    <a href="#" onclick="toggleAuth('reset')" style="font-size: 0.85rem; color: #888;">Mot de passe
                        oublie ?</a>
                </div>
            </form>

            <!-- Reset Password Form -->
            <form id="resetPasswordForm" onsubmit="resetPassword(event)" style="display: none;">
                <h3 style="text-align: center; margin-bottom: 1.5rem;">Mot de passe oublie</h3>
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" name="email" required class="form-control" placeholder="votre@email.com">
                </div>
                <button type="submit" class="btn btn-warning" style="width: 100%;">Envoyer le lien</button>
                <div style="text-align: center; margin-top: 1rem;">
                    <a href="#" onclick="toggleAuth('login')" style="font-size: 0.9rem;">Retour a la connexion</a>
                </div>
            </form>

            <!-- Register Form -->
            <form id="registerForm" onsubmit="register(event)" style="display: none;">
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" name="email" required class="form-control" placeholder="votre@email.com">
                </div>
                <div class="form-group">
                    <label>Mot de passe</label>
                    <input type="password" name="password" required class="form-control" minlength="6">
                </div>
                <div class="form-group">
                    <label>Confirmer mot de passe</label>
                    <input type="password" name="confirmPassword" required class="form-control" minlength="6">
                </div>
                <button type="submit" class="btn btn-success" style="width: 100%;">Creer un compte</button>
                <div style="text-align: center; margin-top: 1rem;">
                    <a href="#" onclick="toggleAuth('login')" style="font-size: 0.9rem;">Retour a la connexion</a>
                </div>
            </form>
        </div>
    </div>

    <!-- App Container -->
    <div id="app-container" style="display: none;">
        <!-- Navbar -->
        <nav class="navbar">
            <div class="nav-container">
                <div class="nav-brand">
                    <span class="brand-icon">ðŸš›</span>
                    <span class="brand-title">3 Essieux Manager</span>
                </div>
                <button class="nav-toggle" onclick="toggleMenu()">â˜°</button>
                <ul class="nav-menu" id="navMenu">
                    <li><a href="#dashboard" class="nav-link active">ðŸ“Š Dashboard</a></li>
                    <li><a href="#vehicles" class="nav-link">ðŸš› Vehicules</a></li>
                    <li><a href="#drivers" class="nav-link">ðŸ‘¥ Chauffeurs</a></li>
                    <li><a href="#attendance" class="nav-link">ðŸ“… Presences</a></li>
                    <li><a href="#tachydrive" class="nav-link">ðŸ“Š TachyDrive</a></li>
                    <li><a href="#todo" class="nav-link">âœ… Todo</a></li>
                    <li><button class="btn btn-sm btn-danger" onclick="logout()">Deconnexion</button></li>
                </ul>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="main-content" id="mainContent">
            <!-- Content will be rendered here -->
        </main>
    </div>

    <!-- Modal -->
    <div id="modal" class="modal">
        <div class="modal-content">
            <span class="modal-close" onclick="closeModal()">Ã—</span>
            <div id="modalBody"></div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="supabaseClient.js"></script>
    <script src="storage-manager.js"></script>
    <script src="attendance-manager.js"></script>
    <script src="app.js"></script>
</body>

</html>
